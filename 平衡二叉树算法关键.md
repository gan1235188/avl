#### 平衡二叉树算法关键：

- 旋转的方向与旋转中心（节点）：

  - 单左旋：插入节点后，第一个失去平衡的祖先节点（A）与它的右子节点（B），右子节点向左边旋转，顶替失去平衡的节点变成父节点，同时B节点的左子节点变成A节点的右子节点。旋转中心节点为A

  - 单右旋：插入节点后，第一个失去平衡的祖先节点（A）与它的左子节点（B），左子节点向左边旋转，顶替失去平衡的节点变成父节点，同时B节点的右子节点变成A节点的左子节点。旋转中心节点为A

  - 双旋：先左旋，在右旋。

    - 先左旋：设插入节点为（Z），插入节点以后第一个失去平衡的节点为（A）。以插入节点为起点，到第一个失去平衡的祖先节点（A）这条路径上，A的孙子节点C与A的子节点B是这次左旋的两个节点（使用C替换B），即将B节点作为【单左旋】的旋转中心节点

      比如，节点路径为：A -> B -> C -> Z。Z作为插入节点，A作为第一个失去平衡的节点，那么，C节点和B节点就是左旋操作的两个节点，使用C替换B，B节点变成C节点的字节点

    - 在右旋：在【左旋】完成以后，将A节点作为右旋的中心节点进行旋转。此时，C节点已经代替B节点作为A的子节点，所以，此次旋转，是使用C节点替换A节点。

  - 双旋：选右旋，在左旋。操作跟【双旋：先左旋，在右旋】类似，区别只是操作的子节点方向相反。

- 什么时候使用哪种旋转：假设失去平衡的节点为A，左子节点为A_L，右子节点为A_R。

  - 如果A_L的高度 【**大**】于A_R的高度：
    - 如果，A_L的左子节点的高度也【**大**】于A_L右子节点的高度（高度大的方向相同）。则使用单右旋（A为旋转中心）。
    - 如果，A_L的左子节点的高度【**小**】于A_R右子节点的高度（高度大的方向相反）。则使用双旋：先左旋，在右旋。
  - 如果A_L的高度小于A_R的高度：
    - 如果，A_R的左子节点的高度也【**小**】于A_R右子节点的高度（高度大的方向相同）。则使用单右旋（A为旋转中心）
    - 如果，A_R的左子节点的高度【**大**】于A_R右子节点的高度（高度大的方向相反）。则使用双旋：先右旋，在左旋。

